<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Drag and Drop</title>
    <style>
      #container {
      	margin-left: 100px;
      	margin-top: 30px;
      }
      h2 {
      	margin-left: 50px;
      }
      #dest {
        background: lightCyan;
        border: 1px solid #444;
        border-radius: 50px;
        width: 640px;
        height: 480px;
        padding: 1rem;
        position: relative; /* 所以呢度要set做 default(static)以外的 */
      }
      #trash{
        position: absolute; /* 通過指定元素相對於最近的非static定位祖先元素的偏移，來確定元素位置。 */
        right: 0; 
        bottom: 0;
      }
    </style>
  </head>
  <body>
  	<div id='container'>
  	  <h2>Drag & Drop Demo</h2>
      <div id='dest' ondrop='drop(event)' ondragover='allow(event)'>
        <img id='trash' src='trashlit.png' ondrop='dropTrash(event)' ondragover='allow(event)'>
      </div>
      <p>
        <img id='source1' src='cube.png' draggable='true' ondragstart='drag(event)'>
        <img id='source2' src='Dice.png' draggable='true' ondragstart='drag(event)'>
        <img id='source3' src='ball.png' draggable='true' ondragstart='drag(event)'>
      </p>
      <p>Dragging the image to copy it into the above div element.<br>
      To move, hold the 'Shift' key while dragging.</p>
    </div>

    <script>

      
      let dropSound = new Audio();
      dropSound.src = './drop.wav';

      let trashSound = new Audio();
      trashSound.src = './trash.wav';

      let i=1, j=1, k=1;

      function allow(event){
        event.preventDefault();
      }

      function drag(event){
        event.dataTransfer.setData('image/png', event.target.id);
      }

      function drop(event){
        // 每個element獨立有一個id 先符合HTML標準 亦係delete得順利既最主要因素
        // 唔知點解入左DestDiv既img改左id之後就會無辦法再自己Duplicate, 所以用shift移入去都要改id, 唔可以直接appendChild  

        event.preventDefault();
        let ID_Data=event.dataTransfer.getData('image/png')
        
        if(event.shiftKey){
          if (ID_Data=='source1'){
            dropSound.play();
            event.target.innerHTML += ('<img id = "source1_'+i+'" src = cube.png draggable = true ondragstart = drag(event)>');
            i++;
          } 
          else if (ID_Data=='source2'){
            dropSound.play();
            event.target.innerHTML += ('<img id = "source2_'+j+'" src = Dice.png draggable = true ondragstart = drag(event)>');
            j++;
          } 
          else if (ID_Data=='source3'){
            dropSound.play();
            event.target.innerHTML += ('<img id = "source3_'+k+'" src = ball.png draggable = true ondragstart = drag(event)>');
            k++;
          } 
          var fileToBeDeleted=document.getElementById(ID_Data);
          fileToBeDeleted.parentNode.removeChild(fileToBeDeleted);
        }
        else {
          if (ID_Data=='source1'){
            dropSound.play();
            event.target.innerHTML += ('<img id = "source1_'+i+'" src = cube.png draggable = true ondragstart = drag(event)>');
            i++;
          } 
          else if (ID_Data=='source2'){
            dropSound.play();
            event.target.innerHTML += ('<img id = "source2_'+j+'" src = Dice.png draggable = true ondragstart = drag(event)>');
            j++;
          } 
          else if (ID_Data=='source3'){
            dropSound.play();
            event.target.innerHTML += ('<img id = "source3_'+k+'" src = ball.png draggable = true ondragstart = drag(event)>');
            k++;
          } 
        }
      }

      function dropTrash(event){

        event.preventDefault();
        let ID_Data=event.dataTransfer.getData('image/png');

        if(ID_Data != 'source1' && ID_Data != 'source2' && ID_Data != 'source3'){
          var fileToBeDeleted=document.getElementById(ID_Data);
          trashSound.play();
          fileToBeDeleted.parentNode.removeChild(fileToBeDeleted);
        }

      }
    </script>
  </body>
</html>